{% extends "base.html" %}

{% block content %}

<head>
  <style>
    p, form {
      display: inline;
      vertical-align: middle;
      padding-right: 5px;
    }
    .filter {
      text-align: center;
    }
  </style>
</head>

<h2>Products for sale:</h2>

<div class="filter">

  <form action="" method="post">
    {{ form1.hidden_tag() }}
    <p>
      {{ form1.category.label }}
      {{ form1.category(size=1) }}
    </p>
    <p>
      {{ form1.key.label }}
      {{ form1.key(size=1) }}
    </p>
    <p>
      {{ form1.page_val.label }}
      {{ form1.page_val(size=10) }}
    </p>
    <p>
      {{ form1.search_val.label }}
      {{ form1.search_val(size=50) }}
    </p>
    {{ form1.submit() }}
  </form>

  {% if current_user.is_authenticated %}
  <a href="{{ url_for('add_new_product.new_product') }}" type="button" class="btn btn-light">Add Product</a>
  {% else %}
  <a href="{{ url_for('add_new_product.new_product') }}" type="button" class="btn btn-light">Log-In</a>
  {% endif %}
  {% if prev_page%}
  <a href="{{ url_for('productPage.productPage', page_num=prev_page,sort_by = curr_sort, filter_by = curr_filter) }}" type="button" class="btn btn-light">Previous</a>
  {% endif %}
  {% if next_page%}
  <a href="{{ url_for('productPage.productPage', page_num=next_page,sort_by = curr_sort, filter_by = curr_filter) }}" type="button" class="btn btn-light">Next</a>
  {% endif %}
  {% for mesg in get_flashed_messages() %}
        <h3>{{ mesg }}</h3>
  {% endfor %}
  
  </div>
<div class="prod">
<table class='table table-hover table-bordered container'>
  <thead class="thead-dark">
    <tr>
      <th scope="col">Product ID</th>
      <th scope="col">Product Name</th>
      <th scope="col">Price</th>
    </tr>
  </thead>
  <tbody>
    {% for product in avail_products%}
      <tr>
          <th scope="row"><a href ="{{ url_for('productSummary.product_summaries', pid = product.pid) }}"> {{product.pid}}</a></th>
        <td>{{product.name}}</td>
        <td>{{product.price}}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
</div>
<br>
{% endblock %}
